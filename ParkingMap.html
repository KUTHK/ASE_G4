<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>駐輪状況</title>
  <style>
    body {
      margin: 0;
      background-color: #ccc;
      font-family: sans-serif;
    }

    .map-container {
    position: relative;
    width: 100%;
    max-width: 600px;
    margin: 0 auto;
    aspect-ratio: 9 / 11;
    background-color: #ccc;
    background-image: url('map.png'); 
    background-size: cover;
    background-position: center;
  }

    .map-img {
      width: 100%;
      height: auto;
      display: block;
    }

    .slot {
      position: absolute;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      color: #fff;
      font-weight: bold;
      text-align: center;
      line-height: 36px;
      font-size: 14px;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);
    }

    .vacant { background-color: green; }       /* 空き */
    .few { background-color: orange; }         /* 少し空き */
    .occupied { background-color: red; }       /* 満車 */
    .error { background-color: gray; }


    .slot-info {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      border: 1px solid #aaa;
      border-radius: 8px;
      padding: 10px 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      display: none;
      z-index: 100;
    }
  </style>
</head>
<body>

<h2 style="text-align: center; color: #333;">駐輪場マップ</h2>

<div class="map-container">
  <img src="map.png" alt="駐輪場マップ" class="map-img">
 
  <!-- スロットの仮配置 何も渡されなかった場合エラー-->
   <div class="slot error" style="top: 85%; left: 90%;" data-id="1"></div>
   <div class="slot error" style="top: 55%; left: 90%;" data-id="2"></div>
   <div class="slot error" style="top: 17%; left: 90%;" data-id="3"></div>
   <div class="slot error" style="top: 55%; left: 59%;" data-id="4"></div>
   <div class="slot error" style="top: 17%; left: 59%;" data-id="5"></div>
   <div class="slot error" style="top: 55%; left: 28%;" data-id="6"></div>
   <div class="slot error" style="top: 17%; left: 28%;" data-id="7"></div>
   <div class="slot error" style="top: 55%; left: 15.5%;" data-id="8"></div>
   <div class="slot error" style="top: 17%; left: 15.5%;" data-id="9"></div>

</div>

<div id="slot-info" class="slot-info"></div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const info = document.getElementById('slot-info');

    // 状況コード：
    // 0 = 空き多い (緑)
    // 1 = 少し空き (オレンジ)
    // 2 = 満車 (赤)
    // undefined/null = データなし (灰色)
    const slotStatus = {
      1: 2,
      2: 1,
      3: 0,
      4: 2,
      5: 1,
      6: 0,
      7: 2,
      8: 1,
      9: 2,
      10: 1,
      11: 0
    };

    const statusLabels = {
      0: '空き',
      1: '残りわずか',
      2: '満車',
      default: '不明（データなし）'
    };

    document.querySelectorAll('.slot').forEach(slot => {
      const id = parseInt(slot.dataset.id);
      const status = slotStatus[id];

      slot.classList.remove('vacant', 'few', 'occupied', 'error');

      if (status === 0) slot.classList.add('vacant');
      else if (status === 1) slot.classList.add('few');
      else if (status === 2) slot.classList.add('occupied');
      else slot.classList.add('error');

      slot.textContent = id;

      slot.addEventListener('click', () => {
        const text = statusLabels.hasOwnProperty(status) ? statusLabels[status] : statusLabels.default;
        info.textContent = `スロット ${id}：${text}`;
        info.style.display = 'block';
      });
    });

    document.body.addEventListener('click', (e) => {
      if (!e.target.classList.contains('slot')) {
        info.style.display = 'none';
      }
    });
  });
</script>

</body>
</html>