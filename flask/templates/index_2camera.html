<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body { padding-top: 50px; background-color: #f8f9fa; }
        .container { text-align: center; }
        .camera-block { margin-bottom: 40px; }
        .timestamp { margin-top: 10px; font-size: 1.2em; }
        button { margin: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">{{ title }}</h1>

        <!-- 一括操作ボタン -->
        <!-- <div class="mb-4">
            <button class="btn btn-primary" onclick="refreshAll()">画面更新</button>
            <button class="btn btn-success" onclick="runInferenceAll()">推論</button>
        </div> -->

        <!-- 現在時刻 -->
        <div class="timestamp mb-3">
            現在時間: <span id="current-time">{{ current_time }}</span>
        </div>

        <!-- カメラ画像を横並び -->
        <div class="row justify-content-center">
            <div class="col-md-5 camera-block">
                <h3>カメラ1</h3>
                <img id="camera1Image" src="data:image/jpeg;base64,{{ image1 }}" alt="カメラ1画像" class="img-fluid rounded border">
            </div>
            <div class="col-md-5 camera-block">
                <h3>カメラ2</h3>
                <img id="camera2Image" src="data:image/jpeg;base64,{{ image2 }}" alt="カメラ2画像" class="img-fluid rounded border">
            </div>
        </div>


    <!-- jQuery & Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        function refreshAll() {
            // window.location.reload();
            fetch('/capture_image')
            .then(res => res.json())
            .then(data => {
                document.getElementById("camera1Image").src = "data:image/jpeg;base64," + data.camera1.image;
                document.getElementById("camera2Image").src = "data:image/jpeg;base64," + data.camera2.image;
                document.getElementById("current-time").textContent = data.camera1.current_time;
            });
        }

        function runInferenceAll() {
            fetch('/inference')
            .then(res => res.json())
            .then(data => {
                if (data.camera1?.image) {
                    document.getElementById("camera1Image").src = "data:image/jpeg;base64," + data.camera1.image;
                }
                if (data.camera2?.image) {
                    document.getElementById("camera2Image").src = "data:image/jpeg;base64," + data.camera2.image;
                }
            });
        }
    </script> -->
</body>
</html>
